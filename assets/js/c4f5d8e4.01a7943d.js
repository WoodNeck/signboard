(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[195],{3844:function(e,t,i){"use strict";i.d(t,{Z:function(){return j}});var n=i(2122),r=i(9756),o=i(3552),a=i(7294),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function u(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function c(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var l=function(e){function t(i,n){var r=e.call(this,"(signboard.js) "+i)||this;return r.message=i,r.code=n,Object.setPrototypeOf(r,t.prototype),r.name="SignBoardError",r}return function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(t,e),t}(Error),f=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),d=new Float32Array([0,1,1,1,0,0,0,0,1,1,1,0]),h=0,_=1,m=2,p=3,T=4,v=5,b=6,g=function(e,t){return typeof e+" is not a "+t.map((function(e){return'"'+e+'"'})).join(" or ")+"."},E=function(e){return'Element with selector "'+e+'" not found.'},R=function(e){return"Given element <"+e.tagName+"> is not a canvas."},y=function(e){return'WebGL context creation failed with the following error - "'+e+'"'},S=function(e){return'Failed compiling shader - "'+e+'"'},P=function(e){return'Failed compiling WebGL program - "'+e+'"'},A=function(e){return'Failed to load image with src - "'+e+'"'},w="webglcontextcreationerror",x="load",z="error",U="resize",L="loadeddata";var D=function(e){var t=function(e){var t=null;if("string"==typeof e){var i=document.querySelector(e);if(!i)throw new l(E(e),_);t=i}else e&&e.nodeType===Node.ELEMENT_NODE&&(t=e);return t}(e);if(!t)throw new l(g(e,["HTMLElement","string"]),h);if(!/^canvas$/i.test(t.tagName))throw new l(R(t),m);return t},I=function(){function e(e,t){var i=this,n=t.frameRate,r=t.tileSize,o=t.emission,a=t.bulbSize;this._onAnimationFrame=function(e){var t=i._lastRenderTime,n=e-t,r=1e3/i._frameRate;(n>=r||t<0)&&(i.render(),i._lastRenderTime=t+r),i._animationID=requestAnimationFrame(i._onAnimationFrame)},this._canvas=e,this._gl=function(e){var t,i="",n=function(e){i=e.statusMessage||"Unknown Error"};if(e.addEventListener(w,n),t=e.getContext("webgl",{}),e.removeEventListener(w,n),!t)throw new l(y(i),p);return e.addEventListener("webglcontextlost",(function(e){console.log("contextlost"),e.preventDefault()}),!1),t}(e),this._program=null,this._texture=null,this._lastRenderTime=-1,this._animationID=-1,this._uniforms={uInvTileSize:null,uResolution:null,uEmission:null,uBulbSize:null},this._frameRate=n,this._tileSize=r,this._emission=o,this._bulbSize=a}var t=e.prototype;return Object.defineProperty(t,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gl",{get:function(){return this._gl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"frameRate",{get:function(){return this._frameRate},set:function(e){this._frameRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"tileSize",{get:function(){return this._tileSize},set:function(e){this._tileSize=e,this._updateUniforms(),this.render()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"emission",{get:function(){return this._emission},set:function(e){this._emission=e,this._updateUniforms(),this.render()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"bulbSize",{get:function(){return this._bulbSize},set:function(e){this._bulbSize=e,this._updateUniforms(),this.render()},enumerable:!1,configurable:!0}),t.destroy=function(){this.stop(),this._texture=null,this._gl.deleteProgram(this._program)},t.init=function(){var e=this._gl,t=this._createWebGLProgram();this._program=t,e.useProgram(t),this._bindAttributes(t),this._bindUniforms(t),this._updateUniforms()},t.setTexture=function(e){e.init(this._gl),this._texture=e},t.resize=function(){var e=this._canvas;e.width=e.clientWidth,e.height=e.clientHeight,this._updateUniforms()},t.start=function(){this._animationID=requestAnimationFrame(this._onAnimationFrame)},t.stop=function(){cancelAnimationFrame(this._animationID),this._animationID=-1,this._lastRenderTime=-1},t.render=function(){var e=this._gl;this._texture.upload(this._gl),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLES,0,6),e.bindTexture(e.TEXTURE_2D,null)},t._compileShader=function(e,t){var i=this._gl,n=i.createShader(t);if(i.shaderSource(n,e),i.compileShader(n),!i.getShaderParameter(n,i.COMPILE_STATUS))throw new l(S(i.getShaderInfoLog(n)),T);return n},t._createWebGLProgram=function(){var e=this._gl,t=e.createProgram(),i=this._compileShader("#define GLSLIFY 1\nattribute vec4 aPosition;attribute vec2 aTexCoord;varying vec2 vTexCoord;void main(){gl_Position=aPosition;vTexCoord=aTexCoord;}",e.VERTEX_SHADER),n=this._compileShader("precision highp float;\n#define GLSLIFY 1\nvarying vec2 vTexCoord;uniform float uInvTileSize;uniform vec2 uResolution;uniform float uEmission;uniform float uBulbSize;uniform sampler2D uTexture;float sstep(float edge0,float edge1,float x){x=clamp((x-edge0)/(edge1-edge0),0.0,1.0);return x*x*(3.0-2.0*x);}void main(){vec2 tilesPerSide=floor(uResolution*uInvTileSize);vec2 invTilesPerSide=1.0/tilesPerSide;vec2 tileCenter=floor(vTexCoord*tilesPerSide)*invTilesPerSide+invTilesPerSide*0.5;vec2 diffToCenter=vTexCoord-tileCenter;vec2 distToCenter=diffToCenter*diffToCenter*4.0*tilesPerSide*tilesPerSide;float dist=distToCenter.x+distToCenter.y;float dissipation=1.0-sstep(0.0,uBulbSize*uBulbSize,dist*dist);gl_FragColor=texture2D(uTexture,tileCenter)*dissipation*uEmission;}",e.FRAGMENT_SHADER);if(e.attachShader(t,i),e.attachShader(t,n),e.linkProgram(t),!e.getProgramParameter(t,e.LINK_STATUS))throw new l(P(e.getProgramInfoLog(t)),v);return t},t._bindAttributes=function(e){var t=this._gl,i=t.getAttribLocation(e,"aPosition"),n=t.getAttribLocation(e,"aTexCoord"),r=t.createBuffer(),o=t.createBuffer();t.enableVertexAttribArray(i),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,f,t.STATIC_DRAW),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,d,t.STATIC_DRAW),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0)},t._bindUniforms=function(e){var t=this._gl;this._uniforms={uInvTileSize:t.getUniformLocation(e,"uInvTileSize"),uResolution:t.getUniformLocation(e,"uResolution"),uEmission:t.getUniformLocation(e,"uEmission"),uBulbSize:t.getUniformLocation(e,"uBulbSize")}},t._updateUniforms=function(){var e=this._gl,t=this._canvas,i=this._uniforms;this._program&&(e.uniform1f(i.uInvTileSize,1/this._tileSize),e.uniform2f(i.uResolution,t.width,t.height),e.uniform1f(i.uEmission,this._emission),e.uniform1f(i.uBulbSize,this._bulbSize))},e}(),C="image",F="video",O=function(){function e(e){this._image=e,this._texture=null}var t=e.prototype;return t.init=function(e){this._texture=e.createTexture()},t.upload=function(e){e.bindTexture(e.TEXTURE_2D,this._texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image)},e}(),B=function(){function e(e){this._video=e,this._texture=null}var t=e.prototype;return t.init=function(e){this._texture=e.createTexture(),this._video.play()},t.upload=function(e){e.bindTexture(e.TEXTURE_2D,this._texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._video)},e}(),N=function(){function e(e,t){this._src=e,this._type=t}var t=e.prototype;return t.load=function(){return u(this,void 0,Promise,(function(){return c(this,(function(e){switch(this._type){case C:return[2,this._loadImage()];case F:return[2,this._loadVideo()]}return[2]}))}))},t._loadImage=function(){return u(this,void 0,Promise,(function(){var e,t;return c(this,(function(i){return e=new Image,t=this._src,[2,new Promise((function(i,n){e.addEventListener(x,(function(){i(new O(e))})),e.addEventListener(z,(function(){n(new l(A(t),b))})),e.crossOrigin="anonymous",e.src=t}))]}))}))},t._loadVideo=function(){return u(this,void 0,Promise,(function(){var e,t;return c(this,(function(i){return e=document.createElement("video"),t=this._src,[2,new Promise((function(i,n){e.addEventListener(L,(function(){i(new B(e))})),e.addEventListener(z,(function(){n(new l(A(t),b))})),e.loop=!0,e.playsInline=!0,e.crossOrigin="anonymous",e.src=t,e.load()}))]}))}))},e}(),G=function(){function e(e,t,i){var n=void 0===i?{}:i,r=n.contentType,o=void 0===r?C:r,a=n.frameRate,s=void 0===a?60:a,u=n.autoResize,c=void 0===u||u,l=n.tileSize,f=void 0===l?8:l,d=n.emission,h=void 0===d?1:d,_=n.bulbSize,m=void 0===_?.7:_;this._renderer=new I(D(e),{frameRate:s,tileSize:f,emission:h,bulbSize:m}),this._src=t,this._initialized=!1,this._contentType=o,this._autoResize=c,this.resize=this.resize.bind(this),this.init()}var t=e.prototype;return Object.defineProperty(t,"renderer",{get:function(){return this._renderer},enumerable:!1,configurable:!0}),Object.defineProperty(t,"src",{get:function(){return this._src},enumerable:!1,configurable:!0}),Object.defineProperty(t,"initialized",{get:function(){return this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(t,"contentType",{get:function(){return this._contentType},set:function(e){this._contentType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"frameRate",{get:function(){return this._renderer.frameRate},set:function(e){this._renderer.frameRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"tileSize",{get:function(){return this._renderer.tileSize},set:function(e){this._renderer.tileSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"autoResize",{get:function(){return this._autoResize},set:function(e){this._updateAutoResize(e)},enumerable:!1,configurable:!0}),t.init=function(){return u(this,void 0,void 0,(function(){var e,t;return c(this,(function(i){switch(i.label){case 0:return e=this._renderer,[4,new N(this._src,this._contentType).load()];case 1:return t=i.sent(),e.resize(),e.init(),e.setTexture(t),this._contentType===F?e.start():e.render(),this._autoResize&&(this._autoResize=!1,this._updateAutoResize(!0)),this._initialized=!0,[2]}}))}))},t.resize=function(){var e=this._renderer;e.resize(),e.render()},t._updateAutoResize=function(e){this._autoResize!==e&&(e?window.addEventListener(U,this.resize):window.removeEventListener(U,this.resize),this._autoResize=e)},e}(),X=["src","contentType"],j=function(e){function t(t){var i;return(i=e.call(this,t)||this)._src=t.src,i._contentType=t.contentType,i._canvas=a.createRef(),i}(0,o.Z)(t,e);var i=t.prototype;return i.componentDidMount=function(){this._instance=new G(this._canvas.current,this._src,{contentType:this._contentType})},i.render=function(){var e=this.props,t=(e.src,e.contentType,(0,r.Z)(e,X));return a.createElement("canvas",(0,n.Z)({},t,{ref:this._canvas}))},t}(a.Component)},2841:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=i(7294),r=i(9349),o=i(2263),a=i(3844);function s(){var e=(0,o.Z)().siteConfig;return n.createElement(r.Z,{title:"Hello from "+e.title,description:"Description will go into a meta tag in <head />"},n.createElement("header",{className:"hero"},n.createElement("div",{className:"container"},n.createElement("h1",{className:"title"},e.title),n.createElement("p",{className:"subtitle"},e.tagline))),n.createElement("main",null,n.createElement("div",{className:"container demo-canvas-wrapper"},n.createElement(a.Z,{className:"demo-canvas",src:"video/Astronaut.mp4",contentType:"video"}))))}}}]);