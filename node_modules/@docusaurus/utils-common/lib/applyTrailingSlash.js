"use strict";
/**
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(exports, "__esModule", { value: true });
function applyTrailingSlash(path, trailingSlash) {
    if (path.startsWith('#')) {
        // Never apply trailing slash to an anchor link
        return path;
    }
    // TODO deduplicate: also present in @docusaurus/utils
    function addTrailingSlash(str) {
        return str.endsWith('/') ? str : `${str}/`;
    }
    function removeTrailingSlash(str) {
        return str.endsWith('/') ? str.slice(0, -1) : str;
    }
    // undefined = legacy retrocompatible behavior
    if (typeof trailingSlash === 'undefined') {
        return path;
    }
    // The trailing slash should be handled before the ?search#hash !
    const [pathname] = path.split(/[#?]/);
    // Never transform '/' to ''
    const newPathname = pathname === '/'
        ? '/'
        : trailingSlash
            ? addTrailingSlash(pathname)
            : removeTrailingSlash(pathname);
    return path.replace(pathname, newPathname);
}
exports.default = applyTrailingSlash;
